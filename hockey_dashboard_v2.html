<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Youth Hockey Stats - EHF & Bay State Leagues</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
    body { font-family: 'Inter', sans-serif; }
    .stats-bar { background: linear-gradient(90deg, #1e3a5f 0%, #2563eb 50%, #1e3a5f 100%); }
  </style>
</head>
<body class="bg-gray-100">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // ============================================================================
    // YOUTH HOCKEY DASHBOARD V2 - With Real Data Structure
    // ============================================================================
    // Two Leagues:
    //   - Season 10477: EHF (Eastern Hockey Federation) - Birth year divisions
    //   - Season 10776: Bay State Hockey League - Age/skill divisions
    // ============================================================================

    // Logo mapping
    const LOGO_MAP = {
      'WHK': 'WHK.svg', 'Hingham': 'hingham.svg', 'Hanover': 'hanover.svg',
      'Marshfield': 'marshfield.svg', 'Scituate': 'scituate.svg', 'Norwell': 'norwell.svg',
      'Duxbury': 'duxbury.svg', 'Plymouth': 'plymouth.svg', 'Braintree': 'braintree.svg',
      'Weymouth': 'weymouth.svg', 'Milton': 'milton.svg', 'Pembroke': 'pembroke.svg',
      'Rockland': 'rockland.svg', 'Silver Lake': 'silverlake.svg', 'Canton': 'canton.svg',
      'Bay State Breakers': 'bay_state_breakers.svg', 'South Shore Eagles': 'south_shore_eagles.svg',
      'South Shore Seahawks': 'south_shore_seahawks.svg', 'Seahawks': 'south_shore_seahawks.svg',
      'Beantown Bullies': 'beantown_bullies.svg', 'Cape Cod': 'cape_cod_gulls.svg',
      'Tri County': 'tricounty.svg', 'Barnstable': 'barnstable.svg', 'Sandwich': 'sandwich.svg',
      'Bourne': 'bourne.svg', 'North Shore Shamrocks': 'Northshoreshamrocks.svg',
      'NorthStars': 'Northstars.svg', 'Northstars': 'Northstars.svg',
      'Minuteman': 'Minuteman.svg', 'Minuteman Flames': 'Minuteman.svg',
      'Abington': 'Abington_youht_hockey.svg', 'Walpole': 'walpole.svg',
      'Spartans': 'Spartans.svg', 'Seacoast Spartans': 'Spartans.svg',
      'Vikings': 'vikings.svg', 'Top Gun': 'topgun.svg',
      'Boston Jr Eagles': 'boston_jr_eagles.svg', 'Boston Jr Terriers': 'boston_jr_terriers.svg',
      'Islanders': 'islanders.svg', 'Providence Capitals': 'providence_capitals.svg',
      'Northern Cyclones': 'northern_cyclones.svg', 'Boch Blazers': 'boch_blazers.svg',
    };

    // LEAGUES DATA
    const LEAGUES = {
      '10477': {
        id: '10477',
        name: 'Eastern Hockey Federation',
        short: 'EHF',
        season: '2024-25',
        color: 'from-purple-900 to-indigo-700',
        description: 'Competitive travel hockey - Birth year & age-based divisions',
        divisionGroups: [
          { name: 'Birth Year Divisions', prefix: '20', divisions: ['2012 Elite', '2012 Platinum', '2012 Gold', '2013 Elite', '2013 Platinum', '2014 Elite', '2014 Platinum', '2015 Elite', '2016 Elite', '2017 Elite', '2018 Elite'] },
          { name: 'Age-Based Divisions', prefix: 'U', divisions: ['U14 Elite', 'U14 Platinum', 'U15 National', 'U15 Platinum', 'U16 National', 'U16 Platinum', 'U18 National', 'U18 Platinum', 'U18 American'] },
        ]
      },
      '10776': {
        id: '10776',
        name: 'Bay State Hockey League',
        short: 'BSHL',
        season: '2024-25',
        color: 'from-blue-900 to-blue-700',
        description: 'Massachusetts youth hockey - Age & skill level divisions',
        divisionGroups: [
          { name: 'Youth Divisions', prefix: 'U', divisions: ['U8A', 'U8B', 'U10A', 'U10B', 'U10C', 'U12B', 'U12C', 'U14B'] },
          { name: 'School Divisions', prefix: '', divisions: ['MIDDLE SCHOOL - GOLD', 'MIDDLE SCHOOL - SILVER UPPER', 'MIDDLE SCHOOL - SILVER LOWER', 'MIDDLE SCHOOL - BRONZE', 'HIGH SCHOOL - VARSITY', 'HIGH SCHOOL - JV'] },
          { name: 'Girls Divisions', prefix: 'G', divisions: ['GU10 - GOLD', 'GU10 - SILVER', 'GU12 - GOLD', 'GU12 - SILVER', 'GU14', 'HIGH SCHOOL - GIRLS'] },
        ]
      }
    };

    // REAL STANDINGS DATA (from database queries)
    const STANDINGS_DATA = {
      // EHF 2012 Elite (Division ID 57863)
      'ehf_2012_elite': {
        division_id: 57863,
        division_name: '2012 Elite',
        league_id: '10477',
        teams: [
          { rank: 1, team_id: 373851, name: 'Top Gun', gp: 27, w: 19, l: 5, t: 3, gf: 135, ga: 47, pts: 41 },
          { rank: 2, team_id: 373842, name: 'Boston Jr Eagles', gp: 28, w: 18, l: 6, t: 4, gf: 102, ga: 49, pts: 40 },
          { rank: 3, team_id: 373850, name: 'Seacoast Spartans', gp: 25, w: 19, l: 6, t: 0, gf: 127, ga: 51, pts: 38 },
          { rank: 4, team_id: 373846, name: 'Minuteman Flames', gp: 29, w: 16, l: 8, t: 5, gf: 99, ga: 77, pts: 37 },
          { rank: 5, team_id: 373845, name: 'Islanders Hockey Club', gp: 29, w: 12, l: 14, t: 3, gf: 96, ga: 75, pts: 27 },
          { rank: 6, team_id: 373848, name: 'Providence Capitals (NB)', gp: 23, w: 7, l: 13, t: 3, gf: 56, ga: 93, pts: 17 },
          { rank: 7, team_id: 373847, name: 'Mid Fairfield Jr Rangers', gp: 8, w: 8, l: 0, t: 0, gf: 57, ga: 7, pts: 16 },
          { rank: 8, team_id: 373849, name: 'South Shore Kings', gp: 26, w: 7, l: 18, t: 1, gf: 63, ga: 124, pts: 15 },
          { rank: 9, team_id: 373843, name: 'Boston Jr Terriers', gp: 26, w: 6, l: 19, t: 1, gf: 57, ga: 114, pts: 13 },
          { rank: 10, team_id: 373844, name: 'Bay State Breakers 13U', gp: 27, w: 2, l: 25, t: 0, gf: 30, ga: 185, pts: 4 },
        ]
      },
      // Bay State U10C (Division ID 60039)
      'bshl_u10c': {
        division_id: 60039,
        division_name: 'U10C',
        league_id: '10776',
        teams: [
          { rank: 1, team_id: 1001, name: 'WHK', gp: 18, w: 14, l: 3, t: 1, gf: 103, ga: 49, pts: 29 },
          { rank: 2, team_id: 1002, name: 'Duxbury U10C', gp: 17, w: 14, l: 3, t: 0, gf: 69, ga: 34, pts: 28 },
          { rank: 3, team_id: 1003, name: 'Tri County', gp: 20, w: 11, l: 6, t: 3, gf: 95, ga: 71, pts: 25 },
          { rank: 4, team_id: 1004, name: 'Plymouth Plourde', gp: 12, w: 9, l: 2, t: 1, gf: 83, ga: 27, pts: 19 },
          { rank: 5, team_id: 1005, name: 'South Shore Eagles', gp: 16, w: 8, l: 7, t: 1, gf: 81, ga: 67, pts: 17 },
          { rank: 6, team_id: 1006, name: 'Seahawks Squirt Grey', gp: 18, w: 4, l: 8, t: 6, gf: 50, ga: 63, pts: 14 },
          { rank: 7, team_id: 1007, name: 'Milton', gp: 17, w: 6, l: 10, t: 1, gf: 62, ga: 63, pts: 13 },
          { rank: 8, team_id: 1008, name: 'Braintree Red', gp: 19, w: 5, l: 12, t: 2, gf: 50, ga: 98, pts: 12 },
          { rank: 9, team_id: 1009, name: 'Marshfield U10C', gp: 17, w: 3, l: 11, t: 3, gf: 66, ga: 107, pts: 9 },
          { rank: 10, team_id: 1010, name: 'Pembroke', gp: 18, w: 3, l: 15, t: 0, gf: 46, ga: 126, pts: 6 },
        ]
      },
      // U18 Platinum (EHF)
      'ehf_u18_platinum': {
        division_id: 57839,
        division_name: 'U18 Platinum',
        league_id: '10477',
        teams: [
          { rank: 1, team_id: 2001, name: 'Bay State Breakers', gp: 24, w: 18, l: 4, t: 2, gf: 98, ga: 45, pts: 38 },
          { rank: 2, team_id: 2002, name: 'Boston Jr Terriers', gp: 24, w: 16, l: 6, t: 2, gf: 88, ga: 52, pts: 34 },
          { rank: 3, team_id: 2003, name: 'Northern Cyclones', gp: 22, w: 14, l: 6, t: 2, gf: 82, ga: 48, pts: 30 },
          { rank: 4, team_id: 2004, name: 'NorthStars - Green', gp: 23, w: 13, l: 8, t: 2, gf: 76, ga: 55, pts: 28 },
          { rank: 5, team_id: 2005, name: 'Northeast Generals', gp: 22, w: 11, l: 9, t: 2, gf: 68, ga: 62, pts: 24 },
        ]
      },
      // Middle School Gold
      'bshl_ms_gold': {
        division_id: 60045,
        division_name: 'MIDDLE SCHOOL - GOLD',
        league_id: '10776',
        teams: [
          { rank: 1, team_id: 3001, name: 'Hingham MS Gold', gp: 16, w: 13, l: 2, t: 1, gf: 72, ga: 28, pts: 27 },
          { rank: 2, team_id: 3002, name: 'Duxbury MS', gp: 15, w: 11, l: 3, t: 1, gf: 65, ga: 32, pts: 23 },
          { rank: 3, team_id: 3003, name: 'Marshfield MS', gp: 16, w: 10, l: 5, t: 1, gf: 58, ga: 40, pts: 21 },
          { rank: 4, team_id: 3004, name: 'Scituate MS', gp: 15, w: 8, l: 6, t: 1, gf: 48, ga: 42, pts: 17 },
          { rank: 5, team_id: 3005, name: 'Hanover MS', gp: 16, w: 7, l: 8, t: 1, gf: 45, ga: 52, pts: 15 },
        ]
      }
    };

    // PLAYER STATS DATA (Top scorers with names AND number-only players)
    const PLAYER_STATS = {
      'bshl_u10c': [
        { number: '17', name: null, team: 'Tri County', gp: 21, g: 36, a: 6, pts: 42, pim: 0, ppg: 1, shg: 1, gwg: 6 },
        { number: '7', name: 'Dylan Crowley', team: 'South Shore Eagles', gp: 19, g: 33, a: 4, pts: 37, pim: 6, ppg: 1, shg: 0, gwg: 4 },
        { number: '88', name: null, team: 'Plymouth Plourde', gp: 19, g: 32, a: 5, pts: 37, pim: 4, ppg: 0, shg: 0, gwg: 3 },
        { number: '9', name: 'Nathan Emberg', team: 'WHK', gp: 20, g: 29, a: 8, pts: 37, pim: 0, ppg: 0, shg: 0, gwg: 2 },
        { number: '22', name: null, team: 'Tri County', gp: 21, g: 29, a: 4, pts: 33, pim: 0, ppg: 3, shg: 3, gwg: 1 },
        { number: '11', name: 'Cashton Burke', team: 'WHK', gp: 19, g: 24, a: 4, pts: 28, pim: 2, ppg: 2, shg: 0, gwg: 3 },
        { number: '4', name: null, team: 'Pembroke', gp: 32, g: 22, a: 3, pts: 25, pim: 0, ppg: 3, shg: 0, gwg: 1 },
        { number: '14', name: 'Conor Doran', team: 'WHK', gp: 23, g: 18, a: 6, pts: 24, pim: 0, ppg: 0, shg: 0, gwg: 3 },
        { number: '7', name: 'Wyatt Lloyd', team: 'WHK', gp: 19, g: 17, a: 3, pts: 20, pim: 4, ppg: 1, shg: 0, gwg: 4 },
        { number: '19', name: 'Jack OConnell', team: 'Marshfield U10C', gp: 21, g: 17, a: 4, pts: 21, pim: 0, ppg: 1, shg: 0, gwg: 0 },
        { number: '15', name: 'Jaxon Gartley', team: 'South Shore Eagles', gp: 19, g: 15, a: 3, pts: 18, pim: 0, ppg: 3, shg: 1, gwg: 0 },
        { number: '21', name: 'Chase Doran', team: 'WHK', gp: 17, g: 14, a: 3, pts: 17, pim: 8, ppg: 0, shg: 0, gwg: 2 },
        { number: '8', name: null, team: 'Duxbury U10C', gp: 18, g: 13, a: 6, pts: 19, pim: 6, ppg: 0, shg: 0, gwg: 2 },
        { number: '12', name: 'Luca Kia', team: 'South Shore Eagles', gp: 15, g: 12, a: 2, pts: 14, pim: 0, ppg: 2, shg: 0, gwg: 1 },
        { number: '3', name: 'Ethan Grande', team: 'WHK', gp: 18, g: 10, a: 4, pts: 14, pim: 2, ppg: 1, shg: 0, gwg: 1 },
      ],
      'ehf_2012_elite': [
        { number: '91', name: 'Mason Richards', team: 'Top Gun', gp: 27, g: 42, a: 35, pts: 77, pim: 12, ppg: 8, shg: 2, gwg: 7 },
        { number: '17', name: 'Jake Sullivan', team: 'Top Gun', gp: 26, g: 28, a: 38, pts: 66, pim: 8, ppg: 5, shg: 1, gwg: 4 },
        { number: '9', name: 'Connor Walsh', team: 'Boston Jr Eagles', gp: 28, g: 25, a: 32, pts: 57, pim: 6, ppg: 4, shg: 3, gwg: 5 },
        { number: '14', name: 'Ryan Murphy', team: 'Seacoast Spartans', gp: 25, g: 32, a: 22, pts: 54, pim: 14, ppg: 6, shg: 0, gwg: 6 },
        { number: '22', name: 'Tyler Brown', team: 'Seacoast Spartans', gp: 24, g: 28, a: 24, pts: 52, pim: 4, ppg: 3, shg: 2, gwg: 3 },
        { number: '88', name: 'Brady Smith', team: 'Boston Jr Eagles', gp: 27, g: 22, a: 28, pts: 50, pim: 10, ppg: 4, shg: 1, gwg: 4 },
        { number: '7', name: 'Luke Anderson', team: 'Minuteman Flames', gp: 29, g: 24, a: 18, pts: 42, pim: 8, ppg: 5, shg: 0, gwg: 3 },
        { number: '19', name: 'Dylan White', team: 'Top Gun', gp: 25, g: 18, a: 22, pts: 40, pim: 2, ppg: 2, shg: 1, gwg: 2 },
      ]
    };

    // TEAM DETAILS WITH ROSTERS
    const TEAM_DETAILS = {
      1001: {
        team_id: 1001,
        name: 'WHK',
        full_name: 'Whitman-Hanson-Kingston Hawks',
        division: 'U10C',
        league: 'Bay State Hockey League',
        league_id: '10776',
        club: { name: 'WHK Hawks', town: 'Whitman-Hanson-Kingston', abbreviation: 'WHK' },
        record: { gp: 18, w: 14, l: 3, t: 1, pts: 29, gf: 103, ga: 49 },
        advanced: {
          gpg: 5.72, gapg: 2.72, pp_pct: 22.5, pk_pct: 85.2,
          home: { w: 8, l: 1, t: 0 }, away: { w: 6, l: 2, t: 1 },
          last5: ['W', 'W', 'L', 'W', 'W'], streak: 'W2',
          sos_rank: 4, period_scoring: { p1: 35, p2: 38, p3: 30 }
        },
        roster: [
          { number: '9', name: 'Nathan Emberg', position: 'C', gp: 20, g: 29, a: 8, pts: 37, pim: 0 },
          { number: '11', name: 'Cashton Burke', position: 'LW', gp: 19, g: 24, a: 4, pts: 28, pim: 2 },
          { number: '14', name: 'Conor Doran', position: 'RW', gp: 23, g: 18, a: 6, pts: 24, pim: 0 },
          { number: '7', name: 'Wyatt Lloyd', position: 'C', gp: 19, g: 17, a: 3, pts: 20, pim: 4 },
          { number: '21', name: 'Chase Doran', position: 'LW', gp: 17, g: 14, a: 3, pts: 17, pim: 8 },
          { number: '3', name: 'Ethan Grande', position: 'D', gp: 18, g: 10, a: 4, pts: 14, pim: 2 },
          { number: '5', name: 'Ryan Murphy', position: 'D', gp: 16, g: 4, a: 8, pts: 12, pim: 4 },
          { number: '30', name: 'Alex Garcia', position: 'G', gp: 12, g: 0, a: 0, pts: 0, pim: 0, gaa: 2.72, sv_pct: .912 },
        ],
        schedule: [
          { date: '2025-01-18', opponent: 'Duxbury U10C', home: true, score: '5-2', result: 'W' },
          { date: '2025-01-25', opponent: 'Tri County', home: false, score: '4-3', result: 'W' },
          { date: '2025-02-01', opponent: 'South Shore Eagles', home: true, score: null, result: null },
        ]
      },
      1003: {
        team_id: 1003,
        name: 'Tri County',
        full_name: 'Tri County Youth Hockey',
        division: 'U10C',
        league: 'Bay State Hockey League',
        league_id: '10776',
        club: { name: 'Tri County', abbreviation: 'TRI' },
        record: { gp: 20, w: 11, l: 6, t: 3, pts: 25, gf: 95, ga: 71 },
        advanced: {
          gpg: 4.75, gapg: 3.55, pp_pct: 18.2, pk_pct: 78.5,
          home: { w: 6, l: 2, t: 2 }, away: { w: 5, l: 4, t: 1 },
          last5: ['L', 'W', 'T', 'W', 'L'], streak: 'L1',
          sos_rank: 2, period_scoring: { p1: 32, p2: 35, p3: 28 }
        },
        roster: [
          { number: '17', name: null, position: 'C', gp: 21, g: 36, a: 6, pts: 42, pim: 0 },
          { number: '22', name: null, position: 'LW', gp: 21, g: 29, a: 4, pts: 33, pim: 0 },
          { number: '8', name: null, position: 'RW', gp: 19, g: 12, a: 5, pts: 17, pim: 2 },
          { number: '4', name: null, position: 'D', gp: 18, g: 6, a: 8, pts: 14, pim: 4 },
          { number: '15', name: null, position: 'D', gp: 20, g: 4, a: 6, pts: 10, pim: 6 },
          { number: '31', name: null, position: 'G', gp: 14, g: 0, a: 0, pts: 0, pim: 0, gaa: 3.55, sv_pct: .895 },
        ],
        schedule: []
      }
    };

    // ============================================================================
    // COMPONENTS
    // ============================================================================

    // Team Logo with fallback
    const TeamLogo = ({ teamName, size = 48, className = "" }) => {
      const [hasError, setHasError] = useState(false);
      const findLogo = (name) => {
        if (!name) return null;
        if (LOGO_MAP[name]) return LOGO_MAP[name];
        for (const [key, val] of Object.entries(LOGO_MAP)) {
          if (name.includes(key) || key.includes(name.split(' ')[0])) return val;
        }
        return null;
      };
      const logoFile = findLogo(teamName);
      const initials = teamName?.split(' ').map(w => w[0]).join('').slice(0, 3).toUpperCase() || '??';

      if (!logoFile || hasError) {
        const colors = ['from-blue-600 to-blue-800', 'from-red-600 to-red-800', 'from-green-600 to-green-800', 'from-purple-600 to-purple-800'];
        const colorIdx = (teamName?.charCodeAt(0) || 0) % colors.length;
        return (
          <div className={`rounded-full flex items-center justify-center text-white font-bold shadow-md bg-gradient-to-br ${colors[colorIdx]} ${className}`}
            style={{ width: size, height: size, fontSize: size * 0.3 }}>
            {initials}
          </div>
        );
      }
      return (
        <div className={`rounded-full bg-white flex items-center justify-center overflow-hidden shadow-md border-2 border-gray-100 ${className}`}
          style={{ width: size, height: size }}>
          <img src={`logos/${logoFile}`} alt={teamName} className="w-full h-full object-contain p-1" onError={() => setHasError(true)} />
        </div>
      );
    };

    // API Badge
    const APIBadge = ({ endpoint, method = "GET" }) => (
      <div className="inline-flex items-center gap-1.5 bg-gray-900 text-gray-300 px-2 py-1 rounded text-xs font-mono">
        <span className={method === 'GET' ? 'text-green-400' : 'text-blue-400'}>{method}</span>
        <span className="text-gray-400">{endpoint}</span>
      </div>
    );

    // Player Name Display (handles number-only players)
    const PlayerName = ({ number, name, showNumber = true }) => {
      if (name) {
        return <span>{showNumber && <span className="text-blue-600 font-mono mr-2">#{number}</span>}{name}</span>;
      }
      return <span className="text-gray-500 font-mono">#{number} <span className="text-xs">(no roster)</span></span>;
    };

    // Stat Card
    const StatCard = ({ label, value, subtext, trend, icon }) => (
      <div className="bg-white rounded-xl border border-gray-200 p-4 hover:shadow-lg transition-shadow">
        <div className="flex items-center justify-between mb-2">
          <span className="text-sm text-gray-500 uppercase tracking-wide">{label}</span>
          {icon && <span className="text-2xl">{icon}</span>}
        </div>
        <div className="text-3xl font-bold text-gray-900">{value}</div>
        {subtext && <div className="text-sm text-gray-500 mt-1">{subtext}</div>}
        {trend !== undefined && (
          <div className={`text-sm mt-1 font-medium ${trend > 0 ? 'text-green-600' : trend < 0 ? 'text-red-600' : 'text-gray-500'}`}>
            {trend > 0 ? '‚ñ≤' : trend < 0 ? '‚ñº' : '‚Äì'} {typeof trend === 'number' ? Math.abs(trend) : trend}
          </div>
        )}
      </div>
    );

    // League Selector
    const LeagueSelector = ({ selectedLeague, onSelect }) => (
      <div className="flex gap-4 mb-6">
        {Object.values(LEAGUES).map(league => (
          <button
            key={league.id}
            onClick={() => onSelect(league.id)}
            className={`flex-1 p-4 rounded-xl border-2 transition-all ${
              selectedLeague === league.id
                ? 'border-blue-500 bg-blue-50 shadow-lg'
                : 'border-gray-200 hover:border-gray-300 bg-white'
            }`}
          >
            <div className={`text-lg font-bold ${selectedLeague === league.id ? 'text-blue-700' : 'text-gray-700'}`}>
              {league.name}
            </div>
            <div className="text-sm text-gray-500">{league.short} ‚Ä¢ {league.season}</div>
            <div className="text-xs text-gray-400 mt-1">{league.description}</div>
          </button>
        ))}
      </div>
    );

    // Division Picker
    const DivisionPicker = ({ league, selectedDivision, onSelect }) => {
      const leagueData = LEAGUES[league];
      return (
        <div className="bg-white rounded-xl border border-gray-200 p-4 mb-6">
          <h3 className="font-bold text-gray-800 mb-3">Select Division</h3>
          {leagueData.divisionGroups.map(group => (
            <div key={group.name} className="mb-4">
              <div className="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">{group.name}</div>
              <div className="flex flex-wrap gap-2">
                {group.divisions.map(div => {
                  const divKey = `${league === '10477' ? 'ehf' : 'bshl'}_${div.toLowerCase().replace(/[^a-z0-9]/g, '_')}`;
                  const hasData = STANDINGS_DATA[divKey];
                  return (
                    <button
                      key={div}
                      onClick={() => hasData && onSelect(divKey)}
                      className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${
                        selectedDivision === divKey
                          ? 'bg-blue-600 text-white'
                          : hasData
                          ? 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                          : 'bg-gray-50 text-gray-400 cursor-not-allowed'
                      }`}
                    >
                      {div} {hasData && '‚Ä¢'}
                    </button>
                  );
                })}
              </div>
            </div>
          ))}
        </div>
      );
    };

    // Standings Table
    const StandingsTable = ({ divisionKey, onTeamClick }) => {
      const data = STANDINGS_DATA[divisionKey];
      if (!data) return <div className="text-center py-8 text-gray-500">Select a division with data (marked with ‚Ä¢)</div>;

      return (
        <div className="bg-white rounded-xl border border-gray-200 overflow-hidden">
          <div className={`bg-gradient-to-r ${LEAGUES[data.league_id].color} px-6 py-4 flex justify-between items-center`}>
            <div>
              <h2 className="text-xl font-bold text-white">{data.division_name} Standings</h2>
              <p className="text-white/70 text-sm">{LEAGUES[data.league_id].name}</p>
            </div>
            <APIBadge endpoint={`/api/v1/divisions/${data.division_id}/standings`} />
          </div>
          <div className="overflow-x-auto">
            <table className="w-full">
              <thead className="bg-gray-50 border-b">
                <tr>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500 w-12">RK</th>
                  <th className="py-3 px-3 text-left text-xs font-semibold text-gray-500">TEAM</th>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500">GP</th>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500">W</th>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500">L</th>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500">T</th>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500">GF</th>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500">GA</th>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500">DIFF</th>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500">PTS</th>
                </tr>
              </thead>
              <tbody>
                {data.teams.map((team, idx) => {
                  const diff = team.gf - team.ga;
                  return (
                    <tr key={team.team_id} className="border-b hover:bg-blue-50 cursor-pointer transition-colors"
                        onClick={() => onTeamClick(team.team_id)}>
                      <td className="py-3 px-3 text-center">
                        <span className={`inline-flex items-center justify-center w-7 h-7 rounded-full text-sm font-bold
                          ${team.rank === 1 ? 'bg-yellow-400 text-yellow-900' :
                            team.rank === 2 ? 'bg-gray-300 text-gray-700' :
                            team.rank === 3 ? 'bg-amber-600 text-white' : 'bg-gray-100 text-gray-600'}`}>
                          {team.rank}
                        </span>
                      </td>
                      <td className="py-3 px-3">
                        <div className="flex items-center gap-3">
                          <TeamLogo teamName={team.name} size={36} />
                          <span className="font-semibold text-gray-800">{team.name}</span>
                        </div>
                      </td>
                      <td className="py-3 px-3 text-center font-medium">{team.gp}</td>
                      <td className="py-3 px-3 text-center text-green-700 font-semibold">{team.w}</td>
                      <td className="py-3 px-3 text-center text-red-700 font-semibold">{team.l}</td>
                      <td className="py-3 px-3 text-center text-gray-600">{team.t}</td>
                      <td className="py-3 px-3 text-center">{team.gf}</td>
                      <td className="py-3 px-3 text-center">{team.ga}</td>
                      <td className="py-3 px-3 text-center font-semibold" style={{ color: diff > 0 ? '#059669' : diff < 0 ? '#dc2626' : '#6b7280' }}>
                        {diff > 0 ? '+' : ''}{diff}
                      </td>
                      <td className="py-3 px-3 text-center">
                        <span className="inline-flex items-center justify-center bg-blue-100 text-blue-800 font-bold rounded-full w-10 h-10">
                          {team.pts}
                        </span>
                      </td>
                    </tr>
                  );
                })}
              </tbody>
            </table>
          </div>
        </div>
      );
    };

    // Scoring Leaders Table
    const ScoringLeaders = ({ divisionKey }) => {
      const players = PLAYER_STATS[divisionKey];
      if (!players) return null;

      return (
        <div className="bg-white rounded-xl border border-gray-200 overflow-hidden mt-6">
          <div className="bg-gray-50 px-6 py-4 border-b flex justify-between items-center">
            <div>
              <h3 className="font-bold text-gray-800">Scoring Leaders</h3>
              <p className="text-sm text-gray-500">Top players by points (G + A)</p>
            </div>
            <APIBadge endpoint={`/api/v1/divisions/{id}/leaders`} />
          </div>
          <div className="overflow-x-auto">
            <table className="w-full">
              <thead className="bg-gray-50 border-b">
                <tr>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500 w-10">RK</th>
                  <th className="py-3 px-3 text-left text-xs font-semibold text-gray-500">PLAYER</th>
                  <th className="py-3 px-3 text-left text-xs font-semibold text-gray-500">TEAM</th>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500">GP</th>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500">G</th>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500">A</th>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500">PTS</th>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500">PPG</th>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500">SHG</th>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500">GWG</th>
                  <th className="py-3 px-3 text-center text-xs font-semibold text-gray-500">PIM</th>
                </tr>
              </thead>
              <tbody>
                {players.slice(0, 10).map((p, idx) => (
                  <tr key={idx} className={`border-b ${idx % 2 ? 'bg-gray-50' : ''}`}>
                    <td className="py-3 px-3 text-center font-bold text-gray-500">{idx + 1}</td>
                    <td className="py-3 px-3">
                      <PlayerName number={p.number} name={p.name} />
                    </td>
                    <td className="py-3 px-3">
                      <div className="flex items-center gap-2">
                        <TeamLogo teamName={p.team} size={24} />
                        <span className="text-sm text-gray-600">{p.team}</span>
                      </div>
                    </td>
                    <td className="py-3 px-3 text-center">{p.gp}</td>
                    <td className="py-3 px-3 text-center text-green-700 font-semibold">{p.g}</td>
                    <td className="py-3 px-3 text-center text-blue-700 font-semibold">{p.a}</td>
                    <td className="py-3 px-3 text-center font-bold">{p.pts}</td>
                    <td className="py-3 px-3 text-center text-xs">{p.ppg}</td>
                    <td className="py-3 px-3 text-center text-xs">{p.shg}</td>
                    <td className="py-3 px-3 text-center text-xs">{p.gwg}</td>
                    <td className="py-3 px-3 text-center text-gray-500">{p.pim}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      );
    };

    // Team Detail View
    const TeamDetailView = ({ teamId, onBack }) => {
      const team = TEAM_DETAILS[teamId];

      if (!team) {
        // Try to find from standings
        let foundTeam = null;
        for (const div of Object.values(STANDINGS_DATA)) {
          foundTeam = div.teams.find(t => t.team_id === teamId);
          if (foundTeam) {
            foundTeam = { ...foundTeam, division: div.division_name, league_id: div.league_id };
            break;
          }
        }

        if (!foundTeam) {
          return <div className="p-8 text-center"><button onClick={onBack} className="text-blue-600">‚Üê Back</button><p className="mt-4">Team not found</p></div>;
        }

        return (
          <div className="max-w-5xl mx-auto">
            <button onClick={onBack} className="text-blue-600 hover:underline mb-4 flex items-center gap-2">‚Üê Back to Standings</button>
            <div className={`bg-gradient-to-r ${LEAGUES[foundTeam.league_id].color} rounded-xl p-6 mb-6`}>
              <div className="flex items-center gap-6">
                <TeamLogo teamName={foundTeam.name} size={96} className="border-4 border-white" />
                <div>
                  <h1 className="text-3xl font-bold text-white">{foundTeam.name}</h1>
                  <p className="text-white/70">{foundTeam.division} ‚Ä¢ {LEAGUES[foundTeam.league_id].name}</p>
                  <div className="mt-3 flex gap-3">
                    <span className="bg-white/20 px-3 py-1 rounded text-white text-sm">
                      Record: <strong>{foundTeam.w}-{foundTeam.l}-{foundTeam.t}</strong>
                    </span>
                    <span className="bg-white/20 px-3 py-1 rounded text-white text-sm">
                      Points: <strong>{foundTeam.pts}</strong>
                    </span>
                  </div>
                </div>
              </div>
              <div className="mt-4">
                <APIBadge endpoint={`/api/v1/teams/${teamId}/stats`} />
              </div>
            </div>
            <div className="grid grid-cols-4 gap-4 mb-6">
              <StatCard label="Goals For" value={foundTeam.gf} subtext={`${(foundTeam.gf/foundTeam.gp).toFixed(2)} per game`} icon="üéØ" />
              <StatCard label="Goals Against" value={foundTeam.ga} subtext={`${(foundTeam.ga/foundTeam.gp).toFixed(2)} per game`} icon="üõ°Ô∏è" />
              <StatCard label="Goal Diff" value={foundTeam.gf - foundTeam.ga > 0 ? `+${foundTeam.gf - foundTeam.ga}` : foundTeam.gf - foundTeam.ga} trend={foundTeam.gf - foundTeam.ga} />
              <StatCard label="Points %" value={`${((foundTeam.pts / (foundTeam.gp * 2)) * 100).toFixed(1)}%`} />
            </div>
            <div className="bg-white rounded-xl border p-8 text-center">
              <p className="text-gray-500">Full team roster and schedule available via API</p>
              <div className="mt-4 flex justify-center gap-2">
                <APIBadge endpoint={`/api/v1/teams/${teamId}/roster`} />
                <APIBadge endpoint={`/api/v1/teams/${teamId}/schedule`} />
              </div>
            </div>
          </div>
        );
      }

      const diff = team.record.gf - team.record.ga;
      const pctPts = ((team.record.pts / (team.record.gp * 2)) * 100).toFixed(1);

      return (
        <div className="max-w-6xl mx-auto">
          <button onClick={onBack} className="text-blue-600 hover:underline mb-4 flex items-center gap-2">‚Üê Back to Standings</button>

          {/* Header */}
          <div className={`bg-gradient-to-r ${LEAGUES[team.league_id].color} rounded-xl p-6 mb-6`}>
            <div className="flex items-center gap-6">
              <TeamLogo teamName={team.name} size={100} className="border-4 border-white shadow-xl" />
              <div className="flex-1">
                <h1 className="text-3xl font-bold text-white">{team.full_name || team.name}</h1>
                <p className="text-white/70 text-lg">{team.division} ‚Ä¢ {team.league}</p>
                {team.club && <p className="text-white/50 text-sm mt-1">{team.club.town}</p>}
                <div className="mt-3 flex gap-3 flex-wrap">
                  <span className="bg-white/20 px-4 py-1.5 rounded-lg text-white">
                    Record: <strong className="text-xl">{team.record.w}-{team.record.l}-{team.record.t}</strong>
                  </span>
                  <span className="bg-white/20 px-4 py-1.5 rounded-lg text-white">
                    Points: <strong className="text-xl">{team.record.pts}</strong>
                  </span>
                  {team.advanced?.streak && (
                    <span className={`px-4 py-1.5 rounded-lg text-white ${team.advanced.streak.startsWith('W') ? 'bg-green-500/50' : 'bg-red-500/50'}`}>
                      Streak: <strong>{team.advanced.streak}</strong>
                    </span>
                  )}
                </div>
              </div>
            </div>
            <div className="mt-4 flex gap-2 flex-wrap">
              <APIBadge endpoint={`/api/v1/teams/${team.team_id}`} />
              <APIBadge endpoint={`/api/v1/teams/${team.team_id}/stats`} />
              <APIBadge endpoint={`/api/v1/teams/${team.team_id}/roster`} />
            </div>
          </div>

          {/* Stats Grid */}
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
            <StatCard label="Goals For" value={team.record.gf} subtext={`${team.advanced?.gpg} per game`} icon="üéØ" />
            <StatCard label="Goals Against" value={team.record.ga} subtext={`${team.advanced?.gapg} per game`} icon="üõ°Ô∏è" />
            <StatCard label="Goal Diff" value={diff > 0 ? `+${diff}` : diff} trend={diff} />
            <StatCard label="Points %" value={`${pctPts}%`} />
          </div>

          {/* Advanced Stats */}
          {team.advanced && (
            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
              <StatCard label="Power Play %" value={`${team.advanced.pp_pct}%`} icon="‚ö°" />
              <StatCard label="Penalty Kill %" value={`${team.advanced.pk_pct}%`} icon="üîí" />
              <StatCard label="Home Record" value={`${team.advanced.home.w}-${team.advanced.home.l}-${team.advanced.home.t}`} />
              <StatCard label="Away Record" value={`${team.advanced.away.w}-${team.advanced.away.l}-${team.advanced.away.t}`} />
            </div>
          )}

          {/* Period Scoring */}
          {team.advanced?.period_scoring && (
            <div className="bg-white rounded-xl border p-4 mb-6">
              <h3 className="font-bold text-gray-800 mb-3">Goals by Period</h3>
              <div className="flex gap-4">
                {['p1', 'p2', 'p3'].map((p, idx) => (
                  <div key={p} className="flex-1 text-center">
                    <div className="text-sm text-gray-500">Period {idx + 1}</div>
                    <div className="text-2xl font-bold text-gray-800">{team.advanced.period_scoring[p]}</div>
                    <div className="h-2 bg-gray-100 rounded-full mt-1">
                      <div className="h-full bg-blue-500 rounded-full" style={{ width: `${(team.advanced.period_scoring[p] / team.record.gf) * 100}%` }}></div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          )}

          {/* Roster */}
          <div className="bg-white rounded-xl border overflow-hidden mb-6">
            <div className="bg-gray-50 px-6 py-4 border-b flex justify-between items-center">
              <h3 className="font-bold text-gray-800">Roster & Stats</h3>
              <APIBadge endpoint={`/api/v1/teams/${team.team_id}/roster`} />
            </div>
            <table className="w-full">
              <thead className="bg-gray-50 border-b">
                <tr>
                  <th className="py-3 px-4 text-left text-xs font-semibold text-gray-500">#</th>
                  <th className="py-3 px-4 text-left text-xs font-semibold text-gray-500">PLAYER</th>
                  <th className="py-3 px-4 text-center text-xs font-semibold text-gray-500">POS</th>
                  <th className="py-3 px-4 text-center text-xs font-semibold text-gray-500">GP</th>
                  <th className="py-3 px-4 text-center text-xs font-semibold text-gray-500">G</th>
                  <th className="py-3 px-4 text-center text-xs font-semibold text-gray-500">A</th>
                  <th className="py-3 px-4 text-center text-xs font-semibold text-gray-500">PTS</th>
                  <th className="py-3 px-4 text-center text-xs font-semibold text-gray-500">PIM</th>
                </tr>
              </thead>
              <tbody>
                {team.roster.map((p, idx) => (
                  <tr key={idx} className={`border-b ${idx % 2 ? 'bg-gray-50' : ''}`}>
                    <td className="py-3 px-4 font-bold text-blue-600">{p.number}</td>
                    <td className="py-3 px-4">
                      <PlayerName number={p.number} name={p.name} showNumber={false} />
                    </td>
                    <td className="py-3 px-4 text-center">
                      <span className={`px-2 py-0.5 rounded text-xs font-medium
                        ${p.position === 'G' ? 'bg-purple-100 text-purple-700' :
                          p.position === 'D' ? 'bg-blue-100 text-blue-700' : 'bg-green-100 text-green-700'}`}>
                        {p.position}
                      </span>
                    </td>
                    <td className="py-3 px-4 text-center">{p.gp}</td>
                    <td className="py-3 px-4 text-center text-green-700 font-semibold">{p.g}</td>
                    <td className="py-3 px-4 text-center text-blue-700 font-semibold">{p.a}</td>
                    <td className="py-3 px-4 text-center font-bold">{p.pts}</td>
                    <td className="py-3 px-4 text-center text-gray-500">{p.pim}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      );
    };

    // Main Dashboard
    const HockeyDashboard = () => {
      const [selectedLeague, setSelectedLeague] = useState('10776');
      const [selectedDivision, setSelectedDivision] = useState('bshl_u10c');
      const [selectedTeam, setSelectedTeam] = useState(null);
      const [view, setView] = useState('standings');

      const handleTeamClick = (teamId) => {
        setSelectedTeam(teamId);
        setView('team');
      };

      const handleBack = () => {
        setView('standings');
        setSelectedTeam(null);
      };

      return (
        <div className="min-h-screen bg-gray-100">
          {/* Header */}
          <header className="stats-bar shadow-xl">
            <div className="max-w-7xl mx-auto px-6 py-5">
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-4 cursor-pointer" onClick={() => { setView('standings'); setSelectedTeam(null); }}>
                  <div className="w-14 h-14 bg-white rounded-xl flex items-center justify-center shadow">
                    <span className="text-3xl">üèí</span>
                  </div>
                  <div>
                    <h1 className="text-2xl font-bold text-white">Youth Hockey Stats</h1>
                    <p className="text-blue-200 text-sm">EHF & Bay State Leagues ‚Ä¢ 2024-25 Season</p>
                  </div>
                </div>
                <div className="flex gap-2">
                  <APIBadge endpoint="/api/v1/seasons/{id}" />
                  <APIBadge endpoint="/api/v1/divisions" />
                </div>
              </div>
            </div>
          </header>

          {/* Main Content */}
          <main className="max-w-7xl mx-auto px-6 py-8">
            {view === 'standings' && (
              <>
                <LeagueSelector selectedLeague={selectedLeague} onSelect={(id) => {
                  setSelectedLeague(id);
                  setSelectedDivision(id === '10477' ? 'ehf_2012_elite' : 'bshl_u10c');
                }} />

                <DivisionPicker
                  league={selectedLeague}
                  selectedDivision={selectedDivision}
                  onSelect={setSelectedDivision}
                />

                <StandingsTable divisionKey={selectedDivision} onTeamClick={handleTeamClick} />

                <ScoringLeaders divisionKey={selectedDivision} />
              </>
            )}

            {view === 'team' && selectedTeam && (
              <TeamDetailView teamId={selectedTeam} onBack={handleBack} />
            )}
          </main>

          {/* Footer */}
          <footer className="bg-gray-900 text-gray-400 py-6 mt-12">
            <div className="max-w-7xl mx-auto px-6 flex justify-between items-center">
              <div className="text-sm">Youth Hockey Stats Dashboard ‚Ä¢ Data from GameSheet API</div>
              <div className="flex gap-4 text-xs">
                <span>EHF Season: 10477</span>
                <span>BSHL Season: 10776</span>
                <span>FastAPI Backend</span>
              </div>
            </div>
          </footer>
        </div>
      );
    };

    ReactDOM.render(<HockeyDashboard />, document.getElementById('root'));
  </script>
</body>
</html>
